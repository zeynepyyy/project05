import{G as X,H as ee,_ as te,I as ne,v as se,J as z,K as ce,L as pe,M as me,r as J,E as W,N as ve,O as fe,c as le,A as ge,a as xe,w as he,P as _e,Q as be,R as we,S as ye,T as $e,g as ke,U as Ce}from"#entry";import{_ as Pe}from"./ncheckbox-dg5nbt1d.js";import{_ as Ve}from"./ndropdown-gskb7sy5.js";import{_ as Ae}from"./nnavbar-eqdsa2v0.js";import{p as q,k as U,ai as oe,J as i,X as o,a6 as H,u as m,ac as K,a0 as d,a2 as t,ab as A,F as L,ag as Z,W as P,a3 as j,Z as h,q as I,a4 as ae,aa as D,$ as De,j as Fe,at as Ne,a5 as je}from"./vendor/json-editor-vue-ho2zu772.js";import{_ as Ie}from"./nsection-block-owu5vx1c.js";import{_ as Se}from"./filepath-item-f2iy8phl.js";import{_ as Ue}from"./code-snippets-gyl3bqgb.js";import{_ as Te}from"./ndrawer-j5h6fmbh.js";import{D as Oe}from"./constants-b32h69zq.js";import"./vendor/shiki-g7cm1eew.js";import"./vendor/unocss-d7th42z7.js";import"./nicon-title-n11g9rad.js";import"./ncode-block-esxkr86l.js";import"./client-c6aoxv2l.js";const Ee={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},Le={for:"drop-zone-input","text-3xl":"",hover:"text-green cursor-pointer","transition-all":""},Be={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},ze={grid:"~ cols-minmax-8rem gap-8","overflow-auto":"",p6:""},Re={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Me=["src"],Ke={flex:"~ gap1","items-center":""},Ge={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},Ze=q({__name:"AssetDropZone",props:{modelValue:{type:Boolean,required:!0},folder:{type:String,required:!0}},setup(l){const g=l,f=ee(g,"modelValue"),F=U(),n=U([]);function v(s){F.value=s.target,f.value=!0}function b(s){s.target===F.value&&(f.value=!1)}function T(s){s.preventDefault()}function M(s){s.preventDefault(),_(s.dataTransfer.files)}function _(s){const c=Array.from(s||[]);if(c.length){const x=[],y=n.value.map(u=>u.name);for(const u of c)if(y.includes(u.name)){let V=1;const[$,E]=u.name.split(".");for(;y.includes(`${$} (${V}).${E}`);)V++;const R=`${$}-${V}.${E}`,a=new Blob([u],{type:u.type}),e=new File([a],R,{lastModified:Date.now()});x.push(e),y.push(R)}else u.type===""&&z({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}),x.push(u);n.value=[...n.value,...x]}}async function O(){if(ce.value||pe.value)return;me("assets:upload");const s=[];for(const c of n.value){const x=new FileReader;x.readAsDataURL(c);const u=(await new Promise(V=>{x.onload=()=>V(x.result)})).split(";base64,").pop();s.push({path:c.name,encoding:"base64",content:u})}await J.writeStaticAssets(await W(),[...s],g.folder).then(()=>{p(),z({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(c=>{p(),z({message:`Error uploading files: ${c?.message??"unknown"}`,icon:"i-carbon-warning",classes:"text-red"})}),f.value=!1}function G(s){n.value?.splice(s,1)}function B(s){return URL.createObjectURL(s)}function w(s,c){const[x,y]=s.name.split("."),u=c.replace(/\.\w+$/,""),V=`${u}.${y}`;return u.length===0?(alert("File name must be at least 1 characters long"),x):(Object.defineProperty(s,"name",{value:V,writable:!1}),n.value.splice(n.value.indexOf(s),1,s),s)}function r(){n.value=[]}function p(){f.value=!1,r()}return X("dragenter",v),X("dragleave",b),X("dragover",T),X("drop",M),(s,c)=>{const x=te,y=ne,u=se,V=oe("tooltip");return o(),i("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:H(m(f)?"opacity-100 visible":"opacity-0 invisible")},[K(d(x,{icon:"carbon-close",title:"Close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",border:!1,onClick:p},null,512),[[V,"Close",void 0,{"bottom-end":!0}]]),n.value?.length?(o(),i("div",Be,[c[4]||(c[4]=t("div",{px6:"",py6:""},[t("h1",{"text-2xl":""}," Upload "),t("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1)),t("div",ze,[(o(!0),i(L,null,Z(n.value,($,E)=>(o(),i("div",{key:$.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[t("div",Re,[t("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:B($)},null,8,Me)]),t("div",Ke,[d(u,{n:"xs","h-full":"","flex-auto":"","model-value":$.name,"onUpdate:modelValue":R=>w($,R.target.value)},null,8,["model-value","onUpdate:modelValue"]),d(x,{n:"red",icon:"carbon-trash-can","h-full":"","flex-none":"",title:"Remove file",onClick:R=>G(E)},null,8,["onClick"])])]))),128))]),t("div",Ge,[n.value.length?(o(),P(x,{key:0,n:"red",onClick:r},{default:h(()=>[d(y,{icon:"carbon-clean"}),c[2]||(c[2]=A(" Clear ",-1))]),_:1})):j("",!0),d(x,{disabled:!n.value.length,n:"primary solid",onClick:O},{default:h(()=>[d(y,{icon:"carbon-cloud-upload"}),c[3]||(c[3]=A(" Upload ",-1))]),_:1},8,["disabled"])])])):(o(),i("div",Ee,[t("label",Le,[d(y,{icon:"carbon-cloud-upload","mr-2":""}),c[1]||(c[1]=A(" Drop files here or click to select ",-1))]),t("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:c[0]||(c[0]=$=>_($.target.files))},null,32)]))],2)}}}),qe=Object.assign(Ze,{__name:"AssetDropZone"}),Je=q({__name:"AssetFontPreview",props:{asset:{}},setup(l){const g=l,f=I(()=>`devtools-assets-${ve(g.asset)}`);return fe(I(()=>`
  @font-face {
    font-family: '${f.value}';
    src: url('${g.asset.publicPath}');
  }
`)),(F,n)=>(o(),i("div",{"of-hidden":"",style:ae({fontFamily:`'${f.value}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),We=Object.assign(Je,{__name:"AssetFontPreview"}),Xe={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},He=["src"],Qe={key:2,"i-carbon-document":"","text-3xl":"",op20:""},Ye={key:3,"w-full":"","self-start":"",p4:""},et=["textContent"],tt={key:4},nt=["src","autoplay","controls"],ot={key:5},lt={key:0,"i-carbon-volume-up":"","text-3xl":"",op20:""},st=["src"],at={key:6,"i-carbon-help":"","text-3xl":"",op20:""},it=q({__name:"AssetPreview",props:{asset:{},textContent:{},detail:{type:Boolean}},setup(l){return(g,f)=>{const F=We;return o(),i("div",Xe,[l.asset.type==="image"?(o(),i("img",{key:0,src:l.asset.publicPath},null,8,He)):l.asset.type==="font"?(o(),P(F,{key:l.asset.publicPath,asset:l.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):l.asset.type==="text"&&!l.textContent?(o(),i("div",Qe)):l.asset.type==="text"&&l.textContent?(o(),i("div",Ye,[t("pre",{"max-h-10rem":"","of-hidden":"","text-xs":"","font-mono":"",textContent:D(l.textContent)},null,8,et)])):l.asset.type==="video"?(o(),i("div",tt,[t("video",{src:l.asset.publicPath,autoplay:l.detail,controls:l.detail},null,8,nt)])):l.asset.type==="audio"?(o(),i("div",ot,[l.detail?(o(),i("audio",{key:1,src:l.asset.publicPath,controls:""},null,8,st)):(o(),i("div",lt))])):(o(),i("div",at))])}}}),ie=Object.assign(it,{__name:"AssetPreview"}),rt={relative:"",flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},ut={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},dt=q({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(l){const g=l,f=I(()=>g.folder&&g.asset.path.startsWith(g.folder)?g.asset.path.slice(g.folder.length):g.asset.path);return(F,n)=>{const v=ne,b=ie;return o(),i("button",rt,[l.asset.layer?(o(),P(v,{key:0,icon:"i-carbon-layers",absolute:"","right-4":"","top-4":"","bg-primary":""})):j("",!0),d(b,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:l.asset},null,8,["asset"]),t("div",ut,D(f.value),1)])}}}),ct=Object.assign(dt,{__name:"AssetGridItem"}),pt=q({__name:"AssetListItem",props:{item:{},index:{default:0},modelValue:{}},setup(l,{emit:g}){const f=l,n=ee(f,"modelValue",g,{passive:!0}),v=I(()=>f.item?.children?.length),b=U(!0),T=I(()=>v.value?"i-carbon-folder":f.item.type==="image"?"i-carbon-image":f.item.type==="video"?"i-carbon-video":f.item.type==="audio"?"i-carbon-volume-up":f.item.type==="font"?"i-carbon-text-small-caps":f.item.type==="text"?"i-carbon-document":f.item.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(M,_)=>{const O=ne,G=re;return o(),i("div",null,[t("button",{flex:"~ gap-2","w-full":"","items-center":"",hover:"bg-active",px4:"",py1:"",style:ae({paddingLeft:`calc(1rem + ${l.index*1.5}em)`}),class:H({"bg-active":!v.value&&m(n)?.filePath===l.item?.filePath}),border:"b base",onClick:_[0]||(_[0]=B=>v.value?b.value=!b.value:n.value=l.item)},[t("div",{class:H(T.value)},null,2),t("span",{class:H({"flex items-center":v.value}),"flex-auto":"","text-start":"","text-sm":"","font-mono":""},[A(D(l.item.path)+" ",1),l.item.layer?(o(),P(O,{key:0,icon:"i-carbon-layers","bg-primary":""})):j("",!0)],2),v.value?(o(),P(O,{key:0,icon:"carbon:chevron-right","transform-rotate":b.value?90:0,transition:""},null,8,["transform-rotate"])):j("",!0)],6),b.value?De(M.$slots,"default",{key:0},()=>[(o(!0),i(L,null,Z(l.item?.children,B=>(o(),P(G,{key:B.filepath,modelValue:m(n),"onUpdate:modelValue":_[1]||(_[1]=w=>Fe(n)?n.value=w:null),item:B,index:l.index+1},null,8,["modelValue","item","index"]))),128))]):j("",!0)])}}}),re=Object.assign(pt,{__name:"AssetListItem"}),mt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},vt={flex:"~","items-center":"","justify-center":""},ft={"max-w-full":"","w-full":"","table-fixed":""},gt={flex:"~ gap-1","w-full":"","items-center":""},xt={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},ht={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},_t={capitalize:""},bt={key:0},wt={op70:""},yt={flex:"~ gap2 wrap"},$t={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},kt={flex:"~ gap2 wrap justify-center"},Ct={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},Pt={flex:"~ gap2 wrap justify-center"},Vt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},At={flex:"","justify-end":"","gap-4":""},Dt=q({__name:"AssetDetails",props:{modelValue:{}},setup(l,{emit:g}){const n=ee(l,"modelValue",g,{passive:!0}),v=le(async()=>{if(n.value.type==="image")return J.getImageMeta(await W(),n.value.filePath)}),b=U(!1),T=U(),M=U(0),_=le(async()=>{if(n.value.type!=="text")return;M.value;const a=await J.getTextAssetContent(await W(),n.value.filePath);return T.value=a,a});async function O(){if(_.value!==T.value)try{await J.writeStaticAssets(await W(),[{path:n.value.path,content:T.value,override:!0}],""),b.value=!1,M.value++,z({message:"Updated",icon:"i-carbon-checkmark",classes:"text-green"})}catch(a){console.error(a),z({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const G=ge(),B=I(()=>(G.value?._installedModules||[]).some(e=>e.meta?.name==="@nuxt/image"||e.meta?.name==="@nuxt/image-edge"||e.meta?.name==="@nuxt/image-nightly")),w=I(()=>{const a=[];if(n.value.type==="image"){const e=v.value?.width?`
  width="${v.value.width}"
  height="${v.value.height}" `:" ";return a.push({lang:"vue-html",code:`<img${e}
  src="${n.value.publicPath}"
/>`,name:"Plain Image"}),B.value&&a.push({lang:"vue-html",code:`<NuxtImg${e}
  src="${n.value.publicPath}"
/>`,name:"Nuxt Img",docs:"https://image.nuxt.com/usage/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${e}
  src="${n.value.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxt.com/usage/nuxt-picture"}),a}return a.push({lang:"html",code:`<a download href="${n.value.publicPath}">
  Download ${n.value.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),a}),r=xe(),p=he(),s=_e(()=>n.value.mtime),c=I(()=>{const a=n.value.size;return a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(2)} KB`:`${(a/1024/1024).toFixed(2)} MB`}),x=I(()=>{if(!v.value?.width||!v.value?.height)return"";const a=(k,S)=>S?a(S,k%S):k,e=a(v.value.width,v.value.height);return e>3?`${v.value.width/e}:${v.value.height/e}`:""}),y=I(()=>["image","text","video","audio","font"].includes(n.value.type)),u=U(!1);async function V(){try{await J.deleteStaticAsset(await W(),n.value.filePath),n.value=void 0,u.value=!1,z({message:"Asset deleted",icon:"i-carbon-checkmark",classes:"text-green"})}catch(a){console.error(a),z({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const $=U(!1),E=U("");async function R(){const a=n.value.filePath.split("/"),e=a.slice(-1)[0]?.split(".").slice(0,-1).join(".");if(!E.value||E.value===e)return z({message:"Please enter a new name",icon:"i-carbon-warning",classes:"text-orange"});try{const k=a.slice(-1)[0]?.split(".").slice(-1)[0],S=`${a.slice(0,-1).join("/")}/${E.value}.${k}`;await J.renameStaticAsset(await W(),n.value.filePath,S),n.value=void 0,$.value=!1,z({message:"Asset renamed",icon:"i-carbon-checkmark",classes:"text-green"})}catch(k){console.error(k),z({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}return(a,e)=>{const k=ie,S=Se,N=te,ue=Ue,Q=be,de=se,Y=oe("tooltip");return o(),i(L,null,[t("div",mt,[y.value?(o(),i(L,{key:0},[e[13]||(e[13]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Preview "),t("div",{"x-divider":""})],-1)),t("div",vt,[d(k,{detail:"","max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:m(n),"text-content":m(_)},null,8,["asset","text-content"])])],64)):j("",!0),e[25]||(e[25]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Details "),t("div",{"x-divider":""})],-1)),t("table",ft,[t("tbody",null,[t("tr",null,[e[14]||(e[14]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1)),t("td",null,[t("div",gt,[d(S,{filepath:m(n).filePath,"text-left":""},null,8,["filepath"]),K(d(N,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",border:!1,onClick:e[0]||(e[0]=C=>m(p)(m(n).filePath))},null,512),[[Y,"Open in Editor"]])])])]),t("tr",null,[e[15]||(e[15]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1)),t("td",null,[t("div",xt,[t("div",ht,D(m(n).publicPath),1),K(d(N,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",border:!1,onClick:e[1]||(e[1]=C=>m(r)(m(n).publicPath,"assets-public-path"))},null,512),[[Y,"Copy public path"]]),K(d(N,{"flex-none":"",to:m(n).publicPath,icon:"carbon-launch",target:"_blank",border:!1,title:"Open in browser"},null,8,["to"]),[[Y,"Open in browser"]])])])]),t("tr",null,[e[16]||(e[16]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1)),t("td",_t,D(m(n).type),1)]),m(v)?.width?(o(),i(L,{key:0},[t("tr",null,[e[17]||(e[17]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1)),t("td",null,D(m(v).width)+" x "+D(m(v).height),1)]),x.value?(o(),i("tr",bt,[e[18]||(e[18]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1)),t("td",null,D(x.value),1)])):j("",!0)],64)):j("",!0),t("tr",null,[e[19]||(e[19]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1)),t("td",null,D(c.value),1)]),t("tr",null,[e[20]||(e[20]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1)),t("td",null,[A(D(new Date(m(n).mtime).toLocaleString())+" ",1),t("span",wt,"("+D(m(s))+")",1)])])])]),e[26]||(e[26]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Actions "),t("div",{"x-divider":""})],-1)),t("div",yt,[d(N,{to:m(n).publicPath,download:"",target:"_blank",icon:"carbon-download",n:"green"},{default:h(()=>[...e[21]||(e[21]=[A(" Download ",-1)])]),_:1},8,["to"]),m(n).type==="text"?(o(),P(N,{key:0,icon:"carbon-edit",n:"cyan",onClick:e[2]||(e[2]=C=>b.value=!b.value)},{default:h(()=>[...e[22]||(e[22]=[A(" Edit ",-1)])]),_:1})):j("",!0),d(N,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:e[3]||(e[3]=C=>$.value=!$.value)},{default:h(()=>[...e[23]||(e[23]=[A(" Rename ",-1)])]),_:1}),d(N,{icon:"carbon-delete",n:"red",onClick:e[4]||(e[4]=C=>u.value=!u.value)},{default:h(()=>[...e[24]||(e[24]=[A(" Delete ",-1)])]),_:1})]),e[27]||(e[27]=t("div",{"flex-auto":""},null,-1)),w.value.length?(o(),P(ue,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":w.value},null,8,["code-snippets"])):j("",!0)]),d(Q,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=C=>u.value=C)},{default:h(()=>[t("div",$t,[e[30]||(e[30]=t("span",null," Are you sure you want to delete this asset? ",-1)),t("div",kt,[d(N,{icon:"carbon-close",onClick:e[5]||(e[5]=C=>u.value=!1)},{default:h(()=>[...e[28]||(e[28]=[A(" Cancel ",-1)])]),_:1}),d(N,{icon:"carbon-delete",n:"red",onClick:V},{default:h(()=>[...e[29]||(e[29]=[A(" Delete ",-1)])]),_:1})])])]),_:1},8,["modelValue"]),d(Q,{modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=C=>$.value=C)},{default:h(()=>[t("div",Ct,[d(de,{modelValue:E.value,"onUpdate:modelValue":e[7]||(e[7]=C=>E.value=C),placeholder:"New name",n:"blue"},null,8,["modelValue"]),t("div",Pt,[d(N,{icon:"carbon-close",onClick:e[8]||(e[8]=C=>$.value=!1)},{default:h(()=>[...e[31]||(e[31]=[A(" Cancel ",-1)])]),_:1}),d(N,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:R},{default:h(()=>[...e[32]||(e[32]=[A(" Rename ",-1)])]),_:1})])])]),_:1},8,["modelValue"]),m(n).type==="text"?(o(),P(Q,{key:0,modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=C=>b.value=C)},{default:h(()=>[t("div",Vt,[K(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=C=>T.value=C),placeholder:"Item value...",class:"h-lg w-xl of-auto rounded-lg p-4 text-sm font-mono outline-none",onKeydown:je(O,["enter"])},null,544),[[Ne,T.value]]),t("div",At,[d(N,{icon:"carbon-close",onClick:e[11]||(e[11]=C=>b.value=!1)},{default:h(()=>[...e[33]||(e[33]=[A(" Cancel ",-1)])]),_:1}),d(N,{icon:"carbon:save",n:"primary",onClick:O},{default:h(()=>[...e[34]||(e[34]=[A(" save ",-1)])]),_:1})])])]),_:1},8,["modelValue"])):j("",!0)],64)}}}),Ft=Object.assign(Dt,{__name:"AssetDetails"}),Nt={"h-full":"","of-auto":""},jt={"flex-none":"",flex:"~ gap2 items-center","text-lg":""},It={flex:"~ items-center justify-center",absolute:"","bottom--1":"","right--1":"","h-4":"","w-4":"","rounded-full":"","bg-primary:30":"","text-8px":""},St={flex:"~ col","w-30":"","of-auto":""},Ut={"text-xs":"",op75:""},Tt={op50:""},Ot={key:0},Et={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},Lt={key:1,p2:"",grid:"~ cols-minmax-8rem"},Bt={key:1},nn=q({__name:"assets",setup(l){const g=we(),f=U(!1),F=U(""),n=I(()=>new ye(g.value||[],{keys:["path"]})),v=$e(()=>{const w=[];for(const r of g.value||[]){const p=r.path.split(".").pop();p&&!w.find(s=>s.name===p)&&w.push({name:p,value:!0})}return w}),b=I(()=>(F.value?n.value.search(F.value).map(r=>r.item):g.value||[]).filter(r=>{const p=r.path.split(".").pop();return!p||v.some(s=>s.name===p&&s.value)})),T=I(()=>{const w={};for(const r of b.value){const p=`${r.path.split("/").slice(0,-1).join("/")}/`;w[p]||(w[p]=[]),w[p].push(r)}return Object.entries(w).sort(([r],[p])=>r.localeCompare(p))}),M=I(()=>{const w={children:[]},r=(p,s,c)=>{const[x,...y]=s;let u=p.children.find(V=>V.path===x);u||(u={...c,path:x,children:[]},p.children.push(u)),y.length>1?r(u,y,c):y.length===1&&u.children.push({...c,path:y[0]})};return b.value.forEach(p=>{const s=p.path.split("/").filter(c=>c!=="");r(w,s,p)}),w.children}),_=U(),{view:O}=ke("assets");function G(){O.value=O.value==="list"?"grid":"list"}Ce("Escape",()=>{_.value=void 0});const B=U();return(w,r)=>{const p=te,s=Pe,c=Ve,x=Ae,y=qe,u=ct,V=Ie,$=re,E=Ft,R=Te,a=oe("tooltip");return o(),i("div",Nt,[d(x,{ref_key:"navbar",ref:B,search:F.value,"onUpdate:search":r[1]||(r[1]=e=>F.value=e),pb2:""},{actions:h(()=>[t("div",jt,[K(d(p,{icon:"carbon:cloud-upload",title:"File Upload",border:!1,onClick:r[0]||(r[0]=e=>f.value=!f.value)},null,512),[[a,"File Upload",void 0,{"bottom-end":!0}]]),m(v).length?(o(),P(c,{key:0,direction:"end",n:"sm primary"},{trigger:h(({click:e})=>[K(d(p,{icon:"carbon-filter",border:!1,title:"Filter",p3:"","text-lg":"",onClick:k=>e()},null,8,["onClick"]),[[a,"Filter",void 0,{"bottom-end":!0}]]),t("span",It,D(m(v).length),1)]),default:h(()=>[t("div",St,[(o(!0),i(L,null,Z(m(v),e=>(o(),P(s,{key:e.name,modelValue:e.value,"onUpdate:modelValue":k=>e.value=k,flex:"~ gap-2",rounded:"",px2:"",py2:""},{default:h(()=>[t("span",Ut,D(e.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])]),_:1})):j("",!0),K(d(p,{"text-lg":"",border:!1,icon:m(O)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:G},null,8,["icon"]),[[a,"Toggle View",void 0,{"bottom-end":!0}]])])]),default:h(()=>[t("div",Tt,[F.value?(o(),i("span",Ot,D(b.value.length)+" matched Â· ",1)):j("",!0),t("span",null,D(m(g)?.length)+" assets in total",1)])]),_:1},8,["search"]),d(y,{modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=e=>f.value=e),folder:"/"},null,8,["modelValue"]),m(O)==="grid"?(o(),i(L,{key:0},[T.value.length>1?(o(!0),i(L,{key:0},Z(T.value,([e,k])=>(o(),P(V,{key:e,text:e,description:`${k.length} items`,open:k.length<=m(Oe),padding:!1},{default:h(()=>[t("div",Et,[(o(!0),i(L,null,Z(k,S=>(o(),P(u,{key:S.path,asset:S,folder:e,onClick:N=>_.value=S},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(o(),i("div",Lt,[(o(!0),i(L,null,Z(b.value,e=>(o(),P(u,{key:e.path,asset:e,onClick:k=>_.value=e},null,8,["asset","onClick"]))),128))]))],64)):(o(),i("div",Bt,[(o(!0),i(L,null,Z(M.value,(e,k)=>(o(),P($,{key:k,modelValue:_.value,"onUpdate:modelValue":r[3]||(r[3]=S=>_.value=S),item:e},null,8,["modelValue","item"]))),128))])),d(R,{"model-value":!!_.value,"auto-close":"","w-120":"",top:B.value,onClose:r[5]||(r[5]=e=>_.value=void 0)},{default:h(()=>[_.value?(o(),P(E,{key:0,modelValue:_.value,"onUpdate:modelValue":r[4]||(r[4]=e=>_.value=e)},null,8,["modelValue"])):j("",!0)]),_:1},8,["model-value","top"])])}}});export{nn as default};
