import{_ as j}from"./nbadge-dv1e6eny.js";import{_ as F}from"./ncode-block-esxkr86l.js";import{_ as W}from"./ncheckbox-dg5nbt1d.js";import{a6 as q,ah as A,ai as L,Z,aj as E,Q as G,q as J,_ as O,M as Q,ak as X,A as Y,Y as z,W as H,a3 as K,al as ee}from"#entry";import{p as te,k as P,J as _,X as p,F as $,$ as ae,a0 as o,a3 as w,u as s,aa as M,W as ne,Z as r,a2 as v,ab as c,q as oe}from"./vendor/json-editor-vue-ho2zu772.js";const se={key:0},le={p4:"",flex:"~ col gap-1"},re={class:"text-lg font-medium leading-6"},ue={flex:"~ gap-3",mt2:"","justify-end":""},ie=te({__name:"NpmVersionCheck",props:{packageName:{},options:{},showVersion:{type:Boolean,default:!0}},setup(l){const a=l,t=q(),{info:n,update:u,state:g,processId:k,restart:d}=A(a.packageName,a.options),y=P(!0),x=P(!0),D=L(),N=E(),U=Z();async function C(){const i=await u(async e=>N.start(e));Q("npm:update",{packageName:a.packageName,oldVersion:n.value?.current}),i&&x.value&&D.value.push({id:i,message:`${a.packageName} has been updated. Do you want to restart the Nuxt server now?`}),i&&y.value&&(U.value=i,t.push("/modules/terminals"))}return(i,e)=>{const b=j,S=F,h=W,T=J,V=O,I=G;return p(),_($,null,[ae(i.$slots,"default",{id:s(k),info:s(n),update:C,state:s(g),restart:s(d)},()=>[s(n)&&l.showVersion?(p(),_("code",se,M(`v${s(n).current}`),1)):w("",!0),s(n)?.latest?(p(),_($,{key:1},[s(n).needsUpdate?(p(),_("button",{key:0,onClick:e[0]||(e[0]=f=>C())},[o(b,{n:"green",title:"updates available",textContent:"updates available"})])):(p(),ne(b,{key:1,n:"gray",title:"latest",textContent:"latest"}))],64)):w("",!0)]),o(s(N),null,{default:r(({resolve:f,args:R})=>[o(I,{"model-value":!0,onClose:m=>f(!1)},{default:r(()=>[v("div",le,[v("h3",re," Update "+M(a.packageName)+"? ",1),e[8]||(e[8]=v("p",{op50:""}," The following command will be executed in your terminal: ",-1)),o(S,{code:R[0],lang:"bash",my3:"",px4:"",py2:"",border:"~ base rounded",lines:!1},null,8,["code"]),o(h,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=m=>y.value=m),n:"primary"},{default:r(()=>[...e[3]||(e[3]=[c(" Navigate to terminal ",-1)])]),_:1},8,["modelValue"]),o(h,{modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=m=>x.value=m),n:"primary"},{default:r(()=>[...e[4]||(e[4]=[c(" Restart Nuxt server after update ",-1)])]),_:1},8,["modelValue"]),v("div",ue,[o(T,{n:"sm amber","flex-auto":"",icon:"i-carbon-data-backup"},{default:r(()=>[...e[5]||(e[5]=[c(" Please make sure to backup your project first. ",-1)])]),_:1}),o(V,{onClick:m=>f(!1)},{default:r(()=>[...e[6]||(e[6]=[c(" Cancel ",-1)])]),_:1},8,["onClick"]),o(V,{n:"solid primary",onClick:m=>f(!0)},{default:r(()=>[...e[7]||(e[7]=[c(" Update ",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["onClose"])]),_:1})],64)}}}),ve=Object.assign(ie,{__name:"NpmVersionCheck"}),B=["pages","meta","components","imports","nuxt-config-schema","@nuxt/devtools","@nuxt/telemetry"];function me(){return ee("getModulesList",async()=>(await $fetch("https://api.nuxt.com/modules?version=3")).modules.filter(a=>!B.includes(a.npm)&&a.compatibility.nuxt.includes(">=3")))}function ge(){return X("installed-modules",()=>{const l=Y(),a=me();return oe(()=>(l.value?._installedModules||[]).map(t=>{if(!t.entryPath)return;const n=!!(t.entryPath&&z(t.entryPath)),u=t.meta?.name?t.meta?.name:t.entryPath?n?H(t.entryPath):l.value?.rootDir?K(t.entryPath,l.value?.rootDir).path:void 0:void 0,g=!!l.value?.modules?.includes(u),k=a.value?.find(d=>d.npm===u)||a.value?.find(d=>d.name===u);return{name:u,isPackageModule:n,isUninstallable:g,info:k,...t}}).filter(t=>t&&(!t.name||!B.includes(t.name))))})}export{ve as _,me as a,ge as u};
