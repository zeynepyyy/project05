import{b8 as X,b9 as j,_ as P,r as S,E as R,b as Y,ba as h,a6 as ee,a7 as ne,Z as te,a1 as le,i as oe,bb as N,a8 as ie,Q as ue,v as re,q as ae,aj as se,M as de}from"#entry";import{_ as me}from"./filepath-item-f2iy8phl.js";import{p as L,q as V,k as F,J as a,X as o,a2 as e,a3 as y,F as f,ag as U,a6 as E,aa as c,a0 as m,u as b,Z as d,ab as x,ac as D,ad as I,W as C}from"./vendor/json-editor-vue-ho2zu772.js";import{_ as ve}from"./ncode-block-esxkr86l.js";import{_ as pe}from"./ncheckbox-dg5nbt1d.js";import{_ as fe}from"./help-fab-izt1nioe.js";import"./vendor/shiki-g7cm1eew.js";import"./vendor/unocss-d7th42z7.js";import"./client-c6aoxv2l.js";const ce={"h-full":"",grid:"~ rows-[max-content_1fr]"},xe={flex:"~ wrap","w-full":""},be=["onClick"],_e={key:0,flex:"~ col gap-4 items-center justify-center",p4:""},ye={grid:"~ cols-[30px_1fr] gap-x-2 gap-y-3 items-center justify-center","w-100":""},ge="/__nuxt_devtools__/client",we=L({__name:"BuildAnalyzeDetails",props:{current:{},prev:{}},setup(i){const p=i,w=`${X().app.baseURL.replace(ge,"/")}/__nuxt_devtools__/analyze/`.replace(/\/+/g,"/"),z=V(()=>{const l=[{name:"Overview",id:"overview"}];return p.current.features.bundleClient&&l.push({name:"Client Bundle",id:"bundle-client"}),p.current.features.bundleNitro&&l.push({name:"Nitro Bundle",id:"bundle-nitro"}),p.current.features.viteInspect&&l.push({name:"Vite Inspect",id:"vite-inspect"}),l}),u=F(z.value[0]);function $(l){return`${((l.endTime-l.startTime)/1e3).toFixed(1)}s`}function v(l){return l<1024?`${l}B`:l<1024*1024?`${(l/1024).toFixed(1)}KB`:l<1024*1024*1024?`${(l/1024/1024).toFixed(1)}MB`:`${(l/1024/1024/1024).toFixed(1)}GB`}async function T(l){return S.clearAnalyzeBuilds(await R(),[l])}return(l,n)=>{const A=me,k=P;return o(),a("div",ce,[e("div",xe,[(o(!0),a(f,null,U(z.value,(r,t)=>(o(),a("button",{key:t,px4:"",py2:"",border:"r base",hover:"bg-active",class:E(r.id===u.value?.id?"":"border-b"),onClick:B=>u.value=r},[e("div",{class:E(r.id===u.value?.id?"":"op30")},c(r.name),3)],10,be))),128)),n[1]||(n[1]=e("div",{border:"b base","flex-auto":""},null,-1))]),u.value?.id==="overview"?(o(),a("div",_e,[n[15]||(n[15]=e("div",{"flex-auto":""},null,-1)),e("div",ye,[n[10]||(n[10]=e("div",{"i-carbon-commit":"","text-xl":""},null,-1)),e("div",null,[n[2]||(n[2]=e("div",{"text-sm":"",op50:""}," Name ",-1)),e("div",null,c(i.current.name),1)]),n[11]||(n[11]=e("div",{"i-carbon-time":"","text-xl":""},null,-1)),e("div",null,[n[3]||(n[3]=e("div",{"text-sm":"",op50:""}," Build duration ",-1)),e("div",null,c($(i.current)),1)]),i.current.size?.clientBundle?(o(),a(f,{key:0},[n[5]||(n[5]=e("div",{"i-carbon-cics-program":"","text-xl":""},null,-1)),e("div",null,[n[4]||(n[4]=e("div",{"text-sm":"",op50:""}," Client bundle size ",-1)),e("div",null,c(v(i.current.size.clientBundle)),1)])],64)):y("",!0),i.current.size?.nitroBundle?(o(),a(f,{key:1},[n[7]||(n[7]=e("div",{"i-carbon-bare-metal-server":"","text-xl":""},null,-1)),e("div",null,[n[6]||(n[6]=e("div",{"text-sm":"",op50:""}," Nitro bundle size ",-1)),e("div",null,c(v(i.current.size.nitroBundle)),1)])],64)):y("",!0),n[12]||(n[12]=e("div",{"i-carbon-edge-node":"","text-xl":""},null,-1)),e("div",null,[n[8]||(n[8]=e("div",{"text-sm":"",op50:""}," Built ",-1)),e("div",null,c(b(j)(new Date(i.current.endTime))),1)]),n[13]||(n[13]=e("div",{"i-carbon:folder-parent":"","text-xl":""},null,-1)),e("div",null,[n[9]||(n[9]=e("div",{"text-sm":"",op50:""}," Report Path ",-1)),m(A,{filepath:i.current.analyzeDir},null,8,["filepath"])])]),n[16]||(n[16]=e("div",{"flex-auto":""},null,-1)),m(k,{n:"rose",icon:"carbon-delete",onClick:n[0]||(n[0]=r=>T(i.current.name))},{default:d(()=>[...n[14]||(n[14]=[x(" Delete this report ",-1)])]),_:1})])):y("",!0),n._lazyshow1||u.value?.id==="bundle-client"?(n._lazyshow1=!0,o(),a(f,null,[D(e("iframe",{src:`${b(w)}${i.current.slug}/client.html`,"h-full":"","w-full":""},null,8,["src"]),[[I,u.value?.id==="bundle-client"]])],64)):y("v-show-if",!0),n._lazyshow2||u.value?.id==="bundle-nitro"?(n._lazyshow2=!0,o(),a(f,null,[D(e("iframe",{src:`${b(w)}${i.current.slug}/nitro.html`,"h-full":"","w-full":""},null,8,["src"]),[[I,u.value?.id==="bundle-nitro"]])],64)):y("v-show-if",!0),n._lazyshow3||u.value?.id==="vite-inspect"?(n._lazyshow3=!0,o(),a(f,null,[D(e("iframe",{src:`${b(w)}${i.current.slug}/.vite-inspect/`,"h-full":"","w-full":""},null,8,["src"]),[[I,u.value?.id==="vite-inspect"]])],64)):y("v-show-if",!0)])}}}),ze=Object.assign(we,{__name:"BuildAnalyzeDetails"}),$e={},Be={class:"markdown-body"};function Ce(i,p){return o(),a("div",Be,[...p[0]||(p[0]=[e("template",null,[e("div",{class:"markdown-body"},[e("h1",null,"Build Analyze"),e("p",null,[x("DevTools provides a build analyze tool to help you understand the size of your app in production. Whenever you start a new build, it runs the command "),e("code",{"v-pre":""},"nuxt build --analyze"),x(" and present the output data directly in DevTools for easy browsing and comparing.")])])],-1)])])}const ke=Y($e,[["render",Ce]]),Ne={flex:"~ col"},Te=["onClick"],Ae={flex:"~ gap-1 items-center wrap","w-full":"","text-sm":"",op60:""},De={flex:"~ items-center justify-center wrap",p4:""},Ie={flex:"~ col gap-1","w-250":"",p4:""},Se={flex:"~ gap-3",mt2:"","justify-end":""},Oe=L({__name:"analyze-build",setup(i){const p=se(),g=h(),w=ee(),z=ne("analyze-build:slug",""),u=V(()=>g.value?.builds.find(r=>r.slug===z.value)??g.value?.builds[0]),$=F(!1),v=F(""),T=V(()=>g.value?.builds.some(r=>r.name===v.value.trim()));async function l(){v.value=await S.generateAnalyzeBuildName(),await p.start()&&(de("analyze-build:start"),N.value={name:v.value,processId:await S.startAnalyzeBuild(await R(),v.value)},$.value&&k())}const n=te();function A(r){return`${((r.endTime-r.startTime)/1e3).toFixed(1)}s`}function k(){N.value?.processId&&(n.value=N.value.processId,w.push("/modules/terminals"))}return le(()=>[{id:"action:analyze-build: start",title:"Start a new analyze build",icon:"i-carbon-edge-node",action:l}]),(r,t)=>{const B=P,G=ze,O=oe,Z=ie,q=re,M=ae,W=ve,H=pe,J=ue,K=ke,Q=fe;return o(),a(f,null,[m(Z,{"left-size":30},{left:d(()=>[e("div",Ne,[(o(!0),a(f,null,U(b(g)?.builds,s=>(o(),a(f,{key:s.slug},[e("button",{flex:"~ col gap1",p3:"","hover:bg-active":"",class:E(s.slug===u.value?.slug?"text-primary bg-active":""),onClick:_=>z.value=s.slug},[e("code",null,c(s.name),1),e("div",Ae,[t[4]||(t[4]=e("div",{"i-carbon-time":""},null,-1)),e("span",null,c(A(s)),1),t[5]||(t[5]=e("div",{"flex-auto":""},null,-1)),e("span",null,c(b(j)(new Date(s.endTime))),1)])],10,Te),t[6]||(t[6]=e("div",{"x-divider":""},null,-1))],64))),128)),e("div",De,[b(N)?(o(),C(B,{key:1,n:"primary",icon:"carbon-circle-dash animate-spin",onClick:t[1]||(t[1]=s=>k())},{default:d(()=>[...t[8]||(t[8]=[x(" Building... ",-1)])]),_:1})):(o(),C(B,{key:0,n:"primary",icon:"carbon-edge-node",onClick:t[0]||(t[0]=s=>l())},{default:d(()=>[...t[7]||(t[7]=[x(" Start a new build ",-1)])]),_:1}))])])]),right:d(()=>[u.value?(o(),C(G,{key:0,current:u.value},null,8,["current"])):(o(),C(O,{key:1}))]),_:1}),m(b(p),null,{default:d(({resolve:s})=>[m(J,{"model-value":!0,onClose:_=>s(!1)},{default:d(()=>[e("div",Ie,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium leading-6",mb2:""}," Start analyze build? ",-1)),t[14]||(t[14]=e("p",{op50:""}," Enter the name of the build: ",-1)),m(q,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=_=>v.value=_),placeholder:"Build name"},null,8,["modelValue"]),T.value?(o(),C(M,{key:0,"n-orange":""},{default:d(()=>[...t[9]||(t[9]=[x(" A build with the same name already exists, continue would overrides the previous build result. ",-1)])]),_:1})):y("",!0),t[15]||(t[15]=e("div",{my3:"","x-divider":""},null,-1)),t[16]||(t[16]=e("p",{op50:""}," The following command will be executed in your terminal: ",-1)),m(W,{code:`npx nuxi analyze --no-serve --name=${v.value}`,lang:"bash",px4:"",py2:"",border:"~ base rounded",lines:!1},null,8,["code"]),m(H,{modelValue:$.value,"onUpdate:modelValue":t[3]||(t[3]=_=>$.value=_),mt2:"",n:"primary"},{default:d(()=>[...t[10]||(t[10]=[x(" Navigate to terminal ",-1)])]),_:1},8,["modelValue"]),e("div",Se,[m(B,{onClick:_=>s(!1)},{default:d(()=>[...t[11]||(t[11]=[x(" Cancel ",-1)])]),_:1},8,["onClick"]),m(B,{n:"solid primary",onClick:_=>s(!0)},{default:d(()=>[...t[12]||(t[12]=[x(" Start ",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["onClose"])]),_:1}),m(Q,null,{default:d(()=>[m(K)]),_:1})],64)}}});export{Oe as default};
